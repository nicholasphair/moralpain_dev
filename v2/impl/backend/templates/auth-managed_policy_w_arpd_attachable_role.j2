AWSTemplateFormatVersion: 2010-09-09
Description: IAM Role parameterized by managed polcies and an AssumeRolePolicyDocument.
Parameters:
  Name:
    Type: String
  Prefix:
    Type: String
    Default: ''
  ManagedPolicyArns:
    Type: List<String>

Resources:
  Role: 
    Type: AWS::IAM::Role
    Properties: 
      AssumeRolePolicyDocument:
        {{ sceptre_user_data.AssumeRolePolicyDocument }}
      ManagedPolicyArns: !Ref ManagedPolicyArns
      RoleName: !Sub '${Prefix}${Name}'

Outputs:
  RoleName:
    Value: !Ref Role
  RoleArn:
    Value: !GetAtt [Role, Arn]
  RoleId:
    Value: !GetAtt [Role, RoleId]

